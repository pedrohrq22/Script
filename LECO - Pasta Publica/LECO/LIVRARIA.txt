--Cria a tabela Categoria
CREATE TABLE CATEGORIA
(
COD_CATEGORIA INT,
DESCRICAO VARCHAR2(50) NOT NULL,
CONSTRAINT PK_CATEGORIA PRIMARY KEY (COD_CATEGORIA)
);

--Inclui dados na tabela Categoria
INSERT INTO CATEGORIA (COD_CATEGORIA, DESCRICAO) VALUES (1, 'INFORMÁTICA');
INSERT INTO CATEGORIA (COD_CATEGORIA, DESCRICAO) VALUES (2, 'DIDÁTICO');
INSERT INTO CATEGORIA (COD_CATEGORIA, DESCRICAO) VALUES (3, 'INFANTO JUVENIL');
INSERT INTO CATEGORIA (COD_CATEGORIA, DESCRICAO) VALUES (4, 'INFANTIL');
INSERT INTO CATEGORIA (COD_CATEGORIA, DESCRICAO) VALUES (5, 'MEDICINA');

--Consulta a tabela Categoria completa (todos os campos e registros)
SELECT * FROM CATEGORIA;

--Cria a tabela Livro
CREATE TABLE LIVRO
(
COD_LIVRO INT,
TITULO VARCHAR2(80) NOT NULL,
ANO VARCHAR2(4) NOT NULL,
COD_CATEGORIA INT,
CONSTRAINT PK_LIVRO PRIMARY KEY (COD_LIVRO),
CONSTRAINT FK_CATEGORIA	FOREIGN KEY (COD_CATEGORIA) 
REFERENCES CATEGORIA (COD_CATEGORIA)
);
	
--Consulta a tabela Livro completa (todos os campos e registros)
SELECT * FROM LIVRO;

--Consulta a estrutura da tabela Categoria
DESCRIBE CATEGORIA;

--Consulta a estrutura da tabela Livro
DESCRIBE LIVRO;

--Altera a tabela Livro adicionando a coluna preco
ALTER TABLE LIVRO ADD PRECO DECIMAL(5,2);

--Altera a tabela Livro excluindo a coluna preco
ALTER TABLE LIVRO 
DROP COLUMN PRECO;

--Altera a tabela Livro adicionando as colunas preco e qtde_paginas
ALTER TABLE LIVRO
ADD (PRECO DECIMAL (5,2),
	QTDE_PAGINAS DECIMAL(5)
	);

--Altera a tabela Livro renomeando a coluna preco para valor	
ALTER TABLE LIVRO
RENAME COLUMN PRECO TO VALOR;

--Atualiza o valor de todos os Livro para 10
UPDATE LIVRO SET VALOR = 10;

--Atualiza o valor do livro ABC para 5
UPDATE LIVRO SET VALOR = 5
WHERE TITULO = 'ABC';

--Consulta o livro Harry Potter somente com o campo titulo e valor
SELECT TITULO, VALOR FROM LIVRO
WHERE TITULO = 'HARRY POTTER';

--Altera o campo valor para NOT NULL
ALTER TABLE LIVRO
MODIFY VALOR DECIMAL(6,2) NOT NULL;

--Exibe a estrutura da tabela livro
DESCRIBE LIVRO;

--Exclui todos os dados da tabela Livro
DELETE FROM LIVRO;

--Insere dados na tabela Livro
INSERT INTO LIVRO (COD_LIVRO, TITULO, ANO, COD_CATEGORIA, VALOR, QTDE_PAGINAS) VALUES (1, 'HARRY POTTER', '2000', 3, 30, 500);
INSERT INTO LIVRO (COD_LIVRO, TITULO, ANO, COD_CATEGORIA, VALOR, QTDE_PAGINAS) VALUES (2, 'PROJETO DE BANCO DE DADOS', '2017', 1, 100, 1000);
INSERT INTO LIVRO (COD_LIVRO, TITULO, ANO, COD_CATEGORIA, VALOR, QTDE_PAGINAS) VALUES (3, 'ABC', '2015', 2, 20, 300);
INSERT INTO LIVRO (COD_LIVRO, TITULO, ANO, VALOR, QTDE_PAGINAS) VALUES (4, 'ABC2', '2016', 25, 350);
INSERT INTO LIVRO (COD_LIVRO, TITULO, ANO, COD_CATEGORIA, VALOR, QTDE_PAGINAS) VALUES (5, 'LOGICA', '2016', 1, 90, 500);


--Cria a tabela Autor

CREATE TABLE AUTOR 
(COD_AUTOR DECIMAL(38),
NOME VARCHAR2(60) NOT NULL,
DT_NASCIMENTO DATE,
BIOGRAFIA LONG,
NACIONALIDADE VARCHAR2(30) NOT NULL,
CONSTRAINT PK_AUTOR PRIMARY KEY(COD_AUTOR)
);


CREATE TABLE LIVRO_AUTOR
(COD_LIVRO DECIMAL(38),
COD_AUTOR DECIMAL(38),
CONSTRAINT PK_LIVRO_AUTOR PRIMARY KEY (COD_AUTOR, COD_LIVRO),
CONSTRAINT FK_LIVRO FOREIGN KEY (COD_LIVRO) REFERENCES LIVRO (COD_LIVRO),
CONSTRAINT FK_AUTOR FOREIGN KEY (COD_AUTOR) REFERENCES AUTOR (COD_AUTOR)
);

DESCRIBE AUTOR;

